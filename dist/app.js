!function(){"use strict";NodeList.prototype.forEach=Array.prototype.forEach,window.mancala={player:"one",game_over:!1,player_one_pits:document.querySelectorAll(".row.player-one .pit"),player_two_pits:document.querySelectorAll(".row.player-two .pit"),player_one_store:document.querySelector(".store.player-one"),player_two_store:document.querySelector(".store.player-two"),board:[],update_board:function(){this.board[6]="two"===this.player?this.player_two_store:this.player_one_store,this.board[13]="two"===this.player?this.player_one_store:this.player_two_store;for(var a="two"===this.player?this.player_two_pits:this.player_one_pits,b=0;6>b;++b)this.board[b]=a[b];var c="two"===this.player?this.player_one_pits:this.player_two_pits;for(b=7;13>b;++b)this.board[b]=c[b-7]},get_stones:function(a){var b=a.querySelector("p").textContent;return parseInt(b)},set_stones:function(a,b){a.querySelector("p").textContent=b},add_stones:function(a,b){var c=a.querySelector("p");c.textContent=parseInt(c.textContent)+b},do_user_move:function(a){var b=this.move_stones(a);this.check_for_win(),b||this.game_over||this.switch_turn()},switch_turn:function(){this.player="one"===this.player?"two":"one",this.update_board();var a=this.player;setTimeout(function(){document.body.setAttribute("data-player",a),document.querySelector(".current-player").textContent=a},700)},move_stones:function(a){if(this.update_board(),this.get_stones(this.board[a])<1)return!0;var b=this.get_stones(this.board[a]);this.set_stones(this.board[a],0);for(var c=a;b>0;)++c,c>12&&(c=0),this.add_stones(this.board[c],1),b--;var d=12-c;return 6>c&&1===this.get_stones(this.board[c])&&this.get_stones(this.board[d])>0&&(this.add_stones(this.board[6],this.get_stones(this.board[d])+1),this.set_stones(this.board[c],0),this.set_stones(this.board[d],0)),6===c},check_for_win:function(){var a=this,b=function(b){for(var c=0;c<b.length;c++)if(a.get_stones(b[c])>0)return!1;return!0},c=b(this.player_one_pits),d=b(this.player_two_pits);if(c||d){this.game_over=!0,document.body.classList.add("game-over");var e=function(b,c){var d=a.get_stones(b);c.forEach(function(b){d+=a.get_stones(b),a.set_stones(b,0)}),a.set_stones(b,d)};c&&!d?e(this.player_two_store,this.player_two_pits):!c&&d&&e(this.player_one_store,this.player_one_pits);var f=document.querySelector(".status");this.get_stones(this.player_one_store)>this.get_stones(this.player_two_store)?f.textContent="Player one wins!":this.get_stones(this.player_two_store)>this.get_stones(this.player_one_store)?f.textContent="Player two wins!":f.textContent="Draw!"}}},mancala.update_board(),mancala.player_one_pits.forEach(function(a,b){a.setAttribute("data-pit",b),a.onclick=function(){"one"!==mancala.player||mancala.game_over||mancala.do_user_move(this.getAttribute("data-pit"))}}),mancala.player_two_pits.forEach(function(a,b){a.setAttribute("data-pit",b),a.onclick=function(){"two"!==mancala.player||mancala.game_over||mancala.do_user_move(this.getAttribute("data-pit"))}})}();
//# sourceMappingURL=app.js.map