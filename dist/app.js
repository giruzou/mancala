!function(){"use strict";NodeList.prototype.forEach=Array.prototype.forEach,window.mancala={player:"one",gameover:!1,playerOnePits:document.querySelectorAll(".row.player-one .pit"),playerTwoPits:document.querySelectorAll(".row.player-two .pit"),playerOneStore:document.querySelector(".store.player-one"),playerTwoStore:document.querySelector(".store.player-two"),board:[],updateBoard:function(){this.board[6]="two"===this.player?this.playerTwoStore:this.playerOneStore,this.board[13]="two"===this.player?this.playerOneStore:this.playerTwoStore;for(var a="two"===this.player?this.playerTwoPits:this.playerOnePits,b=0;6>b;++b)this.board[b]=a[b];var c="two"===this.player?this.playerOnePits:this.playerTwoPits;for(b=7;13>b;++b)this.board[b]=c[b-7]},getStones:function(a){var b=a.querySelector("p").textContent;return parseInt(b)},setStones:function(a,b){a.querySelector("p").textContent=b},addStones:function(a,b){var c=a.querySelector("p");c.textContent=parseInt(c.textContent)+b},doPlayerMove:function(a){var b=this.moveStones(a);this.checkForWin(),b||this.gameover||this.switchTurn()},switchTurn:function(){this.player="one"===this.player?"two":"one",this.updateBoard();var a=this.player;setTimeout(function(){document.body.setAttribute("data-player",a),document.querySelector(".current-player").textContent=a},700)},moveStones:function(a){if(this.updateBoard(),this.getStones(this.board[a])<1)return!0;var b=this.getStones(this.board[a]);this.setStones(this.board[a],0);for(var c=a;b>0;)++c,c>12&&(c=0),this.addStones(this.board[c],1),b--;var d=12-c;return 6>c&&1===this.getStones(this.board[c])&&this.getStones(this.board[d])>0&&(this.addStones(this.board[6],this.getStones(this.board[d])+1),this.setStones(this.board[c],0),this.setStones(this.board[d],0)),6===c},checkForWin:function(){var a=this,b=function(b){for(var c=0;c<b.length;c++)if(a.getStones(b[c])>0)return!1;return!0},c=b(this.playerOnePits),d=b(this.playerTwoPits);if(c||d){this.gameover=!0,document.body.classList.add("game-over");var e=function(b,c){var d=a.getStones(b);c.forEach(function(b){d+=a.getStones(b),a.setStones(b,0)}),a.setStones(b,d)};c&&!d?e(this.playerTwoStore,this.playerTwoPits):!c&&d&&e(this.playerOneStore,this.playerOnePits);var f=document.querySelector(".status");this.getStones(this.playerOneStore)>this.getStones(this.playerTwoStore)?f.textContent="Player one wins!":this.getStones(this.playerTwoStore)>this.getStones(this.playerOneStore)?f.textContent="Player two wins!":f.textContent="Draw!"}}},mancala.updateBoard(),mancala.playerOnePits.forEach(function(a,b){a.setAttribute("data-pit",b),a.onclick=function(){"one"!==mancala.player||mancala.gameover||mancala.doPlayerMove(this.getAttribute("data-pit"))}}),mancala.playerTwoPits.forEach(function(a,b){a.setAttribute("data-pit",b),a.onclick=function(){"two"!==mancala.player||mancala.gameover||mancala.doPlayerMove(this.getAttribute("data-pit"))}})}();
//# sourceMappingURL=app.js.map